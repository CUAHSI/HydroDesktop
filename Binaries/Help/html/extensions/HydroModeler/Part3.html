
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Part 3 - Creating a Component &mdash; HydroDesktop Help</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="HydroDesktop Help" href="../../index.html" />
    <link rel="up" title="HydroModeler" href="HydroModeler.html" />
    <link rel="next" title="HydroR" href="../HydroR/HydroR.html" />
    <link rel="prev" title="Part 2 - Adjusting Model Input" href="Part2.html" />
    <link media="only screen and (max-device-width: 480px)" href="../../_static/mobile.css" type="text/css" rel="stylesheet" /> 
  </head>
  <body>
<div id="docstitle">
	<a href="http://www.hydrodesktop.org"><img src="../../_static/HDlogo.png" alt="CUAHSI HydroDesktop" height="75px"></a>
</div>
<div id="header">
        <div class="breadcrumb"><a href="../extensions.html" accesskey="U">Extensions</a><img src="../../_static/triangle_closed.png" height="9" width="9" alt="&gt;"></div>
        <div class="breadcrumb"><a href="HydroModeler.html" >HydroModeler</a><img src="../../_static/triangle_closed.png" height="9" width="9" alt="&gt;"></div>
    <div class="breadcrumb">Part 3 - Creating a Component</div>
	<div class="pagebutton"><a href="../../genindex.html" title="General Index" accesskey="I">index</a></div>
	<div class="pagebutton"><a href="../HydroR/HydroR.html" title="HydroR" accesskey="N">next</a></div>
	<div class="pagebutton"><a href="Part2.html" title="Part 2 - Adjusting Model Input" accesskey="P">previous</a></div>
</div>

<div id="sphinxsidebar">
  <div class="sphinxsidebarwrapper">
	<ul><li class="toctree-l1"><a href="../../welcome.html">Welcome</a></li></ul>
	<ul>
<li class="toctree-l1"><a class="reference internal" href="../../general-concepts.html">General Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extensions.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide-books.html">Guide Books</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../version-history.html">Version History</a></li>
</ul>

    <div id="searchbox" style="display: none">
      
        <form class="search" action="../../search.html" method="get">
			<div class="search-wrapper">
			<span class="search-left"></span>
			<input class="prettysearch" type="text" name="q" size="18" />
			<span class="search-right">&nbsp;</span>
			</div>
          <input type="submit" value="Search" class="searchbutton" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
        <p class="searchtip" style="font-size: 90%">
        Enter search terms.
        </p>
    </div>
    <script type="text/javascript">$('#searchbox').show(0);</script>
  </div>
</div>



    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="part-3-creating-a-component">
<span id="index-0"></span><h1>Part 3 - Creating a Component<a class="headerlink" href="#part-3-creating-a-component" title="Permalink to this headline">¶</a></h1>
<p>Up to this point we have run an example stimulation in HydroDesktop and created a new model composition in ArcMap.  In this section we will walk through a sample component to gain an understanding of how creating a specialized component in Visual Studio C# can be useful.  The sample component is a shell of how code should be written to run in HydroDesktop.  This component can be modified by the user to run more meaningful hydrological applications.</p>
<p>C# is an object oriented programming language designed for building a wide variety of applications that run on the .NET Framework.  The .NET Framework is a Windows component that supports building and running of applications and Web services.  The key components of the .NET Framework are the common language runtime and the class library.  The class library is a collection of classes, interfaces, and value types that are included in the Microsoft .NET Framework.  The class library is designed to be the foundation on which the .NET Framework applications, components, and controls are built.</p>
<div class="section" id="getting-stared-with-visual-c">
<span id="index-1"></span><h2>Getting stared with Visual C#<a class="headerlink" href="#getting-stared-with-visual-c" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>If you do not have access to Microsoft Visual Studio you can download Microsoft Visual C# 2008 for free from <a class="reference external" href="http://www.microsoft.com/express/Downloads/">http://www.microsoft.com/express/Downloads/</a></li>
<li>Choose the tab Visual Studio 2008 Express.  Then select Visual C# 2008 Express Edition.  Click Download and follow instructions to install.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/HM_fig44.png" src="../../_images/HM_fig44.png" />
</div>
<ol class="arabic simple" start="3">
<li>If you are learning C# or need a refresher there are many tutorials available on-line that can help.  The address below will take you to Microsoft&#8217;s Development Network were they have a beginners learning center.  There are several links available here for  learning Visual Studio C# and Visual Studio Basic: <a class="reference external" href="http://msdn.microsoft.com/en-us/beginner/bb308734.aspx">http://msdn.microsoft.com/en-us/beginner/bb308734.aspx</a></li>
</ol>
</div>
<div class="section" id="sample-component">
<span id="index-2"></span><h2>Sample Component<a class="headerlink" href="#sample-component" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The sample component is available on the HydroDesktop website under the Documentation tab.</li>
<li>Save the zip file to your computer and extract all files.</li>
<li>Navigate through the Sample Component folder to the Sample Component Visual C# project file.  Double click this file to open in Visual C#.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/HM_fig45.png" src="../../_images/HM_fig45.png" />
</div>
<div class="section" id="references">
<span id="index-3"></span><h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
<p>A reference is a file that is required to run the code you have written.  Usually a reference identifies a dll (Dynamic Linking Library) file.  The references can be viewed by expanding the Reference option listed in the Solution Explorer window located on the upper right side of the page.</p>
<div class="figure align-center">
<img alt="../../_images/HM_fig46.png" src="../../_images/HM_fig46.png" />
</div>
<p>When you expand the References you will see that all of the references you need to run the sample component are listed here already.  The physical location of these files is Sample Component - bin - debug.
If you need to add a reference to your application:</p>
<ol class="arabic simple">
<li>Right click on Reference and select Add Reference.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/HM_fig47.png" src="../../_images/HM_fig47.png" />
</div>
<ol class="arabic simple" start="2">
<li>A window will pop up.  Using the tabs, browse to the location of the dll files to be added.</li>
</ol>
</div>
<div class="section" id="namespaces">
<span id="index-4"></span><h3>Namespaces<a class="headerlink" href="#namespaces" title="Permalink to this headline">¶</a></h3>
<p>Namespaces allow you a way to organize your code.  The &#8220;using&#8221; directive can be implemented as a way of accessing members of a namespace without having to type out their full name each time they are used.  When a new project is created several common namespaces are inserted.  In the sample component you can see these defaults listed at the top of the code.  Directly below them you will see the namespaces that were added to the code with the &#8220;using&#8221; directive.</p>
<div class="figure align-center">
<img alt="../../_images/HM_fig48.png" src="../../_images/HM_fig48.png" />
</div>
</div>
<div class="section" id="methods">
<span id="index-5"></span><h3>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h3>
<p>There are several major parts to this code:</p>
<ol class="arabic simple">
<li>Defining the global variables- In this section variables are defined using specific data types such as string, integer, double, and Boolean.</li>
<li>The Finish method- This section of code tells the application to write output files based on data acquired during the simulation.</li>
<li>The Initialize method- Gives the application instructions on operations that need to be preformed prior to running the simulation.  This section locates the configuration file and sets internal variables in OpenMI.</li>
<li>The Calculations Section- For the Sample Component the calculation section is written so that the application simply generates random numbers.</li>
</ol>
<p>Within the Finish method there is code telling the application where to write the output file.  This line should be changed now to specify where you would like the output file.  If you choose not to change the code then by default the output text file created by HydroModeler will go up two directories from where you run HydroDesktop.</p>
</div>
<div class="section" id="compiling">
<span id="index-6"></span><h3>Compiling<a class="headerlink" href="#compiling" title="Permalink to this headline">¶</a></h3>
<p>The next steps involve compiling the application.  Compiling is the process of converting written code into an executable file that the computer can run.
In Visual Studio C# select Build - Build Solution</p>
<div class="figure align-center">
<img alt="../../_images/HM_fig49.png" src="../../_images/HM_fig49.png" />
</div>
<p>The Building function will check for any errors and alert you to them in the Error List window at the bottom of the screen.</p>
</div>
<div class="section" id="hydrodesktop">
<span id="index-7"></span><h3>HydroDesktop<a class="headerlink" href="#hydrodesktop" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Start HydroDesktop</li>
<li>Click the icon in the upper left corner of the screen.  Then select Extensions - HydroModeler</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/HM_fig50.png" src="../../_images/HM_fig50.png" />
</div>
<ol class="arabic simple" start="3">
<li>Using the drop down tab next to Current Directory, change the directory to the location of your Sample Component files</li>
<li>Once you have the directory pointing to the Sample Component a list of folders will appear to the left side of the screen</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/HM_fig51.png" src="../../_images/HM_fig51.png" />
</div>
<ol class="arabic simple" start="5">
<li>To add the Sample Component Model double click on the data folder then on the sample (type = model).</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/HM_fig52.png" src="../../_images/HM_fig52.png" />
</div>
<ol class="arabic simple" start="6">
<li>A yellow box will appear labeled Sample Component with a connection to a Trigger</li>
<li>Now, select the Run button at the top of the page or you can right click within the workspace and select run.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/HM_fig53.png" src="../../_images/HM_fig53.png" />
</div>
<ol class="arabic simple" start="8">
<li>Leave all of the boxes checked and click RUN.</li>
<li>A progress window should appear.  Once the program is finished scroll down and the last line should read simulation finished successfully.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/HM_fig54.png" src="../../_images/HM_fig54.png" />
</div>
<ol class="arabic simple" start="10">
<li>You can select Close and Yes to the next window that appears.</li>
</ol>
</div>
</div>
</div>


          </div> 
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer"><p>
      &nbsp;&copy; Copyright 2010, Consortium of Universities for the Advancement of Hydrologic Science, Inc.&nbsp;
      &nbsp;Last updated on May 26, 2011.&nbsp;
      &nbsp;Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.&nbsp;
    </p></div>
    <script type="text/javascript" charset="utf-8" src="../../_static/toc.js"></script>
  </body>
</html>