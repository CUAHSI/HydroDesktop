
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial 2: Creating and Running a Model Composition &mdash; HydroDesktop Help</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="HydroDesktop Help" href="../../index.html" />
    <link rel="up" title="HydroModeler" href="HydroModeler.html" />
    <link rel="next" title="Tutorial 3: Creating a New Model Component" href="Tutorial03.html" />
    <link rel="prev" title="Tutorial 1: Quick Start" href="Tutorial01.html" />
    <link media="only screen and (max-device-width: 480px)" href="../../_static/mobile.css" type="text/css" rel="stylesheet" /> 
  </head>
  <body>
<div id="docstitle">
	<a href="http://www.hydrodesktop.org"><img src="../../_static/HDlogo.png" alt="CUAHSI HydroDesktop" height="75px"></a>
</div>
<div id="header">
        <div class="breadcrumb"><a href="../extensions.html" accesskey="U">Extensions</a><img src="../../_static/triangle_closed.png" height="9" width="9" alt="&gt;"></div>
        <div class="breadcrumb"><a href="HydroModeler.html" >HydroModeler</a><img src="../../_static/triangle_closed.png" height="9" width="9" alt="&gt;"></div>
    <div class="breadcrumb">Tutorial 2: Creating and Running a Model Composition</div>
	<div class="pagebutton"><a href="../../genindex.html" title="General Index" accesskey="I">index</a></div>
	<div class="pagebutton"><a href="Tutorial03.html" title="Tutorial 3: Creating a New Model Component" accesskey="N">next</a></div>
	<div class="pagebutton"><a href="Tutorial01.html" title="Tutorial 1: Quick Start" accesskey="P">previous</a></div>
</div>

<div id="sphinxsidebar">
  <div class="sphinxsidebarwrapper">
	<ul><li class="toctree-l1"><a href="../../welcome.html">Welcome</a></li></ul>
	<ul>
<li class="toctree-l1"><a class="reference internal" href="../../general-concepts.html">General Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extensions.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide-books.html">Guide Books</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../version-history.html">Version History</a></li>
</ul>

    <div id="searchbox" style="display: none">
      
        <form class="search" action="../../search.html" method="get">
			<div class="search-wrapper">
			<span class="search-left"></span>
			<input class="prettysearch" type="text" name="q" size="18" />
			<span class="search-right">&nbsp;</span>
			</div>
          <input type="submit" value="Search" class="searchbutton" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
        <p class="searchtip" style="font-size: 90%">
        Enter search terms.
        </p>
    </div>
    <script type="text/javascript">$('#searchbox').show(0);</script>
  </div>
</div>



    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tutorial-2-creating-and-running-a-model-composition">
<span id="index-0"></span><h1>Tutorial 2: Creating and Running a Model Composition<a class="headerlink" href="#tutorial-2-creating-and-running-a-model-composition" title="Permalink to this headline">¶</a></h1>
<p>The purpose of this tutorial is to show how to create a project by linking ready developed components in HydroDesktop, and finally extract the data that are calculated. In this demonstration, we will create example configuration 4 (watershed runoff calculation using TopModel).</p>
<div class="section" id="composite-structure">
<h2>Composite structure<a class="headerlink" href="#composite-structure" title="Permalink to this headline">¶</a></h2>
<p>In this exercise we are interested in calculating the runoff (mm/day) using TopModel component for watershed number 18 in cowetta watershed, Asheville, NC. TopModel component needs an ascii raster of Topographic index for every pixel in the watershed, model parameter (m-To-interception), and  two input exchange items (Daily Precipitation-Daily Potential Evapotranspiration) changing with every time step. First, daily precipitation rate (mm) is obtained from the Db reader (connected to data base). Second, daily evapotranspiration rate (mm/day) is calculated and delivered by Hargreaves component. Db reader supply three input exchange items (Maximum-Minimum-Average) daily Temperature to Hargreaves component. The Db reader is connected to the stored data of watershed 18. Finally, the TopModel will be connected with a trigger to start the calculation at every time step (day), and the Db writer component to store the runoff value to data base. The stored runoff can be plotted as a time series using hydrodesktop grah.</p>
</div>
<div class="section" id="composite-creation">
<h2>Composite Creation<a class="headerlink" href="#composite-creation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Open the start menu and from program choose the CAUHSI HIS, then press hydrodesktop icon.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/Hydrodesktop_start.png" src="../../_images/Hydrodesktop_start.png" />
</div>
<p>.</p>
<ol class="arabic simple" start="2">
<li>check that you have the latest version of hydrodesktop by comparing the version number  of the CUAHSI Hydro Desktop you have and the latest available on  <a class="reference external" href="http://hydrodesktop.codeplex.com/releases/view/59853">http://hydrodesktop.codeplex.com/releases/view/59853</a> (ex; Hydro Desktop version is 1.2537.0). Choose Create New Empty Project button.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/newproject.png" src="../../_images/newproject.png" />
</div>
<p>.</p>
<ol class="arabic simple" start="3">
<li>Load the HydroModeler plugin by selecting the icon in the upper left corner of the screen - Extensions - HydroModeler.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/extensions.png" src="../../_images/extensions.png" />
</div>
<p>.</p>
<ol class="arabic simple" start="4">
<li>Navigate to C:/Hydrodesktop/Installer/HydroModeler_example_configurations/example_configuration_04-models/TOPMODEL.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/CurrentDirectory.png" src="../../_images/CurrentDirectory.png" />
</div>
<p>.</p>
<ol class="arabic simple" start="5">
<li>Edit the Topmodel.omi and be sure that the TopModel.Linkable_Component&#8221; Assembly  is pointing relatively toward the right TopModel.dll file of the model. check the path of both the input TI_raster,configuration file.xml, and revise the values of the input model parameters.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/TopModel.omi.png" src="../../_images/TopModel.omi.png" />
</div>
<ol class="arabic simple" start="6">
<li>Follow the same procedures to be sure that  the Hargreaves, Db reader, Dbwriter omi files are  pointing toward the right .dll file and DataRepository.sqlite.</li>
<li>Right click on the HydroModeler workspace and select Add Model.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/ModelAdding.png" src="../../_images/ModelAdding.png" />
</div>
<p>.</p>
<ol class="arabic simple" start="8">
<li>Navigate to C:/Hydrodesktop/Installer/HydroModeler_example_configurations/example_configuration_04/models and add all two models (TopModel-Hargreaves),and add the DbReader and DbWriter components from C:/Hydrodesktop/Installer/HydroModeler_example_configurations/example_configuration_04/Data/cuahsi-his. now all the models should be added to the HydroModeler workspace. Right click in the HydroModeler workspace and select Add Trigger. A Trigger starts the simulation by invoking the action GetValues on the model at a specified time.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/Component.png" src="../../_images/Component.png" />
</div>
<p>.</p>
<ol class="arabic simple" start="9">
<li>From the top bar choose table and press change button to define the path for the SQlite database file, navigate to C:/Hydrodesktop/Installer/HydroModeler_example_configurations/example_configuration_04/Data/cuahsi-his and select weather Data repository.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/tables.png" src="../../_images/tables.png" />
</div>
<p>.</p>
<ol class="arabic simple" start="10">
<li>return back to the HydroModeler tab. Right click in the HydroModeler workspace and select Add Connection. Next, click on the DbReader to assign it as the source component and then click on the Hargreaves to assign as a target component.</li>
<li>Click on the arrow mark to open a connection properties window. Define the output exchange item that will be supplied as an input exchange item.  check the (+) mark for Temperature  of the Dbreader Output Exchange Items to show the three exchanging Temperature items,  check Coweeta max Temperature box and Hargreaves PET Max Temp box, and then press apply to activate the link. Repeat for all links.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/Dbconnection.png" src="../../_images/Dbconnection.png" />
</div>
<p>.</p>
<ol class="arabic simple" start="12">
<li>Connect the Dbreader to the TopModel to supply the TopModel with the precipitation data of Coweeta watershed. choose Dbreader as a source and TopModel as a target component.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/DbTopmodel.png" src="../../_images/DbTopmodel.png" />
</div>
<p>.</p>
<ol class="arabic simple" start="13">
<li>Connect the Hargreaves PET as a source component to supply the daily calculated PET  to TopModel component.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/hargreaves-TopModel.png" src="../../_images/hargreaves-TopModel.png" />
</div>
<p>.</p>
<ol class="arabic simple" start="14">
<li>Link the TopModel Component as a source to the Db Writer to store the output data (daily runoff hydrograph).</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/DbWriter-TopModel.png" src="../../_images/DbWriter-TopModel.png" />
</div>
<p>.</p>
<ol class="arabic simple" start="15">
<li>Link the TopModel as a source component to the trigger.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/TopModel-Trigger.png" src="../../_images/TopModel-Trigger.png" />
</div>
<p>.</p>
<ol class="arabic simple" start="16">
<li>Right click in the HydroModeler workspace and select Run.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/run.png" src="../../_images/run.png" />
</div>
<p>.</p>
<ol class="arabic simple" start="17">
<li>Select Set all within Events listened during calculation, click Latest overlapping to determine the simulation end time, and finally click RUN!!.</li>
</ol>
<div class="figure align-center">
<img alt="../../_images/runsetup.png" src="../../_images/runsetup.png" />
</div>
<p>.</p>
</div>
</div>


          </div> 
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer"><p>
      &nbsp;&copy; Copyright 2010, Consortium of Universities for the Advancement of Hydrologic Science, Inc.&nbsp;
      &nbsp;Last updated on Jun 17, 2011.&nbsp;
      &nbsp;Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.&nbsp;
    </p></div>
    <script type="text/javascript" charset="utf-8" src="../../_static/toc.js"></script>
  </body>
</html>